<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Détails du Chèque Virtuel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="../js/utils.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F9FA;
            color: #1a202c;
        }

        .status-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            /* full rounded */
            font-size: 0.75rem;
            /* text-xs */
            font-weight: 600;
            /* font-semibold */
        }

        .status-pending {
            background-color: #fffbeb;
            /* amber-50 */
            color: #f59e0b;
            /* amber-600 */
        }

        .status-cashed {
            background-color: #ecfdf5;
            /* green-50 */
            color: #10b981;
            /* green-600 */
        }

        .status-opposed {
            background-color: #fef2f2;
            /* red-50 */
            color: #ef4444;
            /* red-600 */
        }

        .status-expired {
            background-color: #f0f4f8;
            /* gray-100 */
            color: #6b7280;
            /* gray-500 */
        }
    </style>
</head>

<body class="antialiased">

    <div class="flex flex-col items-center justify-center min-h-screen bg-gray-50 p-4 sm:p-6 md:p-8">
        <div class="bg-white rounded-2xl shadow-xl p-6 sm:p-8 md:p-10 w-full max-w-md mx-auto border border-gray-200">
            <div class="flex items-center justify-between mb-6">
                <button class="text-gray-500 hover:text-gray-700 focus:outline-none" id="back-button">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                    </svg>
                </button>
                <h2 class="text-xl font-bold text-gray-800 text-center flex-grow">Détails du Chèque Virtuel</h2>
                <div></div>
            </div>

            <div class="mb-6">
                <h3 class="text-lg font-semibold text-gray-700 mb-2">Informations Générales</h3>
                <p class="text-gray-600"><span class="font-medium">Numéro du Chèque:</span> VC-2025-ABCD-1234</p>
                <p class="text-gray-600"><span class="font-medium">Montant:</span> ₪ 10,000.00</p>
                <p class="text-gray-600"><span class="font-medium">Bénéficiaire:</span> [Nom du Bénéficiaire]</p>
                <p class="text-gray-600"><span class="font-medium">Émis le:</span> 01/06/2025</p>
                <p class="text-gray-600"><span class="font-medium">Expiration:</span> 01/06/2026</p>
                <p class="text-gray-600"><span class="font-medium">Libellé:</span> Loyer Juin 2025</p>
            </div>

            <div class="mb-6">
                <h3 class="text-lg font-semibold text-gray-700 mb-2">Statut Actuel</h3>
                <span id="current-status" class="status-badge status-pending text-lg">En attente d'encaissement</span>
            </div>

            <div class="mt-8 text-center">
                <button id="oppose-button"
                    class="bg-red-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-red-600 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-offset-2"
                    style="display: block;">
                    Faire Opposition
                </button>
                <p id="opposition-confirmation" class="hidden mt-4 text-red-600 font-semibold">Opposition effectuée.</p>
                <button id="view-shared-link"
                    class="mt-3 bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                    Revoir le Lien de Partage
                </button>
                <button id="share-again-button"
                    class="mt-3 bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                    Partager à nouveau
                </button>
            </div>

            <div class="mt-8 text-center text-blue-600">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block align-middle mr-2" fill="none"
                    viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M12 15v2m-2 4h4m6-10V7a4 4 0 00-4-4H8a4 4 0 00-4 4v3m0 7h16v-7H4v7z" />
                </svg>
                <span class="text-sm font-medium text-gray-600">Détails sécurisés par [Nom de la Banque]</span>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const opposeButton = document.getElementById('oppose-button');
            const oppositionConfirmation = document.getElementById('opposition-confirmation');
            const currentStatus = document.getElementById('current-status');
            const viewSharedLinkButton = document.getElementById('view-shared-link');
            const shareAgainButton = document.getElementById('share-again-button');

            // Simulate "Faire Opposition" action
            opposeButton.addEventListener('click', () => {
                // In a real application, this would trigger an API call to oppose the check
                console.log("Opposition du chèque virtuel...");
                currentStatus.textContent = 'Opposé';
                currentStatus.className = 'status-badge status-opposed text-lg';
                opposeButton.style.display = 'none';
                oppositionConfirmation.classList.remove('hidden');
                // Optionally disable other actions or update UI
            });

            // Simulate "Revoir le Lien de Partage" action
            viewSharedLinkButton.addEventListener('click', () => {
                const sharedLink = "https://virtualcheck.app/cash/VC-2025-ABCD-1234"; // Placeholder link
                alert(`Lien de partage actuel : ${sharedLink}`);
                console.log(`Affichage du lien de partage : ${sharedLink}`);
            });

            // Simulate "Partager à nouveau" action
            shareAgainButton.addEventListener('click', () => {
                // This would likely open the sharing options again (as on the "Chèque Virtuel Émis" screen)
                alert("Simulation: Réouverture des options de partage.");
                console.log("Réouverture des options de partage...");
            });

            // Dynamic button visibility based on status (basic simulation)
            // In a real app, this would be determined by the actual status fetched from the backend
            const initialStatus = currentStatus.textContent;
            if (initialStatus !== 'En attente d\'encaissement') {
                opposeButton.style.display = 'none';
            }
            // For other statuses, you might adjust the visibility of other buttons
            if (initialStatus === 'Opposé' || initialStatus === 'Encaissé' || initialStatus === 'Expiré') {
                shareAgainButton.style.display = 'none';
            }
        });
    </script>
</body>

</html>